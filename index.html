<!DOCTYPE html>
<html>
<head>
  <title>The shift to renewables</title>
  <!-- Import Vega & Vega-Lite (does not have to be from CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@4"></script>
  <!-- Import vega-embed -->
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
  <!-- Import pure.css -->
  <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/pure-min.css" integrity="sha384-cg6SkqEOCV1NbJoCu11+bm0NvBRc8IYLRGXkmNrqUBfTjmMYwNKPWBTIKyw9mHNJ" crossorigin="anonymous">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Google font -->
  <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;700;900&display=swap" rel="stylesheet">

  <!-- custom style -->
  <style>
    *{
      font-family: 'Source Sans Pro', sans-serif;
    }
    h1{
      font-weight: 900;
    }
     body{
       background-color: white;
     }
     .page{
       width: 850px;    
       background-color: white;   
       margin: auto;
       padding: 50px;
       padding-top: 35px;
    }
    .vis-container{
      width: 100%;
    }
    .description h2, h1{
      margin-top:0px;
    }
    .description-right {
      padding-left: 20px;
    }
    .description-left{
      padding-right: 20px;
    }
    .pure-g{
      margin-bottom: 25px;
    }
    .small-font{
        font-size: 14px;
    }
      
    $red: #881d12;


    @mixin bump {
        0%      {transform: scale(1); }
        50%     {transform: scale(1.5); }
        100%    {transform: scale(1); }
    }

    @keyframes bump1 { @include bump; }
    @keyframes bump2 {@include bump;}

    body {padding:50px; background:#ededed;}

    .vote-count {
      width:40px;
      height:35px;
      text-align:center;
      color:$red;
      font:20px/1.5 georgia;
      margin-bottom:10px;
      animation: bump .3s; 
      &.bumped {
        animation: bump2 .3s; 
      }
    }

    .vote-btn {
      appearance:none;
      border-radius:3px;
      border:0;
      background:#fff;
      padding:15px 12px 15px 40px;
      font:bold 9px/1.2 arial;
      text-transform:uppercase;
      letter-spacing:1px;
      color:$red;
      box-shadow:0 1px 1px rgba(0,0,0,.2);
      outline:none;
      position:relative;
      transition: all .3s ease-out; 
      cursor:pointer;
      overflow:hidden;

      .icon {
            position:absolute;
        content: "";
        left:10px;
        top:10px;
        width:20px;
        height:20px;
        border-radius:10px;
        display:inline-block;
        background:$red url(https://jamesmuspratt.com/codepen/img/checkmark.svg) no-repeat 2px 1px;
        background-size:16px auto;
      transition: all .3s ease-out; 

      }

    }


    .vote-btn.complete {
      padding-left:15px;
      background:#c1c0bb;
      color: #fff;
      .icon {
        opacity:0;
        /* transform: rotateX(90deg); */
          transform: scale(0); 
     }
    }
  </style>
</head>
<body>

 <div class="page">

   <!-- pure grid group -->
    <div class="pure-g">
      <div class="pure-u-1-1">
        <h1>The Shift to Renewables</h1>
        <p>How well is Australia transitioning to renewables?</p>
      </div>
        
    <form class="myform">
      <p class="vote-count">3</p>
      <button
              class="vote-btn" 
              data-default-text="Vote This Dish Up!"
              data-alt-text="Thanks for Voting">
        <span class="icon"></span> <span class="text">Vote This Dish Up!</span>
      </button>
    </form>
      <div class="pure-button-group" role="group" aria-label="...">
        <style scoped="">
            .button-well,
            .button-not_well {
                color: white;
                border-radius: 4px;
                text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
            }

            .button-well {
                background: rgb(28, 184, 65);
                /* this is a green */
            }

            .button-not_well {
                background: rgb(202, 60, 60);
                /* this is a maroon */
            }
        </style>
        <button class="button-well pure-button">Well</button>
        <button class="button-not_well pure-button">Not Well</button>
    </div>
   </div>
  <!-- end pure grid group -->

    <!-- pure grid group -->
    <div class="pure-g">
        <div class="pure-u-1-1">
          <h2>We know this is a problem because Australia's electricity is one of the dirtiest</h2>
        </div>
        <div class="pure-u-1-1">
          <div id="vis1" class="vis-container"></div>
        </div>
    </div>
    <!-- end pure grid group -->

    <!-- pure grid group -->
    <div class="pure-g">
        <div class="pure-u-1-1">
          <h2>Are we at least getting better?</h2>
        </div>
       <div class="pure-u-1-2">
        <div id="vis4"  class="vis-container"></div>
      </div>
      <div class="pure-u-1-2">
        <div id="vis5"  class="vis-container"></div>
      </div>
        <div class="pure-u-1-1">
          <div id="vis2" class="vis-container"></div>
        </div>
        <div class="pure-u-1-1">
          <div id="vis6" class="vis-container"></div>
        </div>
    </div>
    <!-- end pure grid group -->

    <!-- pure grid group -->
    <div class="pure-g">
      <div class="pure-u-1-1">
        <h2>Why is this happening?!</h2>       
      </div>
      <div class="pure-u-1-1">
        <div id="vis3"  class="vis-container"></div>
      </div>
    
    </div>
    <!-- end pure grid group -->
  
    <div class="pure-g">
      <div class="pure-u-1-1 small-font">
        <p>This visualisation is created by <a href="https://github.com/KadekSatriadi" target="_blank">Kadek Satriadi</a>. The datasource is <a href="#"" target="_blank">some data repository online</href>.</p>
      </div>
    </div>
  

  </div> <!-- end page -->
   
<script type="text/javascript">
  var specVis1 = "https://raw.githubusercontent.com/edengriffithsuni/FIT3179/main/js/choropleth_map.vg.json";
  var specVis2= "https://raw.githubusercontent.com/edengriffithsuni/FIT3179/main/js/fossil_renew_bubble.vg.json";
  var specVis3= "https://raw.githubusercontent.com/edengriffithsuni/FIT3179/main/js/choro_map_sub.vg.json";
  var specVis4= "https://raw.githubusercontent.com/edengriffithsuni/FIT3179/main/js/bottom_line_chart.vg.json";
  var specVis5= "https://raw.githubusercontent.com/edengriffithsuni/FIT3179/main/js/top_line_chart.vg.json";
  var specVis6= "https://raw.githubusercontent.com/edengriffithsuni/FIT3179/main/js/dist_curve.vg.json";

  vegaEmbed('#vis1', specVis1, {"actions": false}).then(function(result) {
    // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
  }).catch(console.error);
  
   vegaEmbed('#vis2', specVis2, {"actions": false}).then(function(result) {
    // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
  }).catch(console.error);

  vegaEmbed('#vis3', specVis3, {"actions": false}).then(function(result) {
    // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
  }).catch(console.error);

  vegaEmbed('#vis4', specVis4, {"actions": false}).then(function(result) {
    // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
  }).catch(console.error);
          
  vegaEmbed('#vis5', specVis5, {"actions": false}).then(function(result) {
    // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
  }).catch(console.error);
            
  vegaEmbed('#vis6', specVis6, {"actions": false}).then(function(result) {
    // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
  }).catch(console.error);
            
    var VoteWidget= {
    settings: {
      $counter: $('.vote-count'),
      $btn:     $('.myform button'),
      },
    init: function() {
      VoteWidget.bind();
    },
      bind: function() {
        VoteWidget.settings.$btn.click(function(){
          if (! $(this).hasClass('complete')) {
                VoteWidget.bumpCount();
          }
          $(this).toggleClass('complete');
          VoteWidget.toggleText();  

        return false;
      });
      },
      bumpCount: function() {
        var current_count = $('.vote-count').text();
        count = parseInt(current_count);
        count++;
        VoteWidget.settings.$counter.toggleClass('bumped').text(count);
      },
      toggleText: function(){
        var $text_container = $('.myform button .text');
        var alt_text = VoteWidget.settings.$btn.data('alt-text');
        var default_text = VoteWidget.settings.$btn.data('default-text');
        var current_text = $text_container.text();
        console.log('current is ' + current_text);
        if ( current_text == default_text ) {
          $text_container.text(alt_text)
        } else {
          $text_container.text(default_text)
        }
      }
    }


    VoteWidget.init();


</script>
</body>
</html>
